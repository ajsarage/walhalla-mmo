ANNEX_UI_SKILL_SELECTION_LAYOUT_TECH_v1.txt
==========================================

PROYECTO: WalhallaMMOonline
VERSIÓN CANÓNICA: CANON_UNIFICADO_WALHALLAMMO_v3
FASE: IMPLEMENTACIÓN UI — WRITE REAL
TIPO: ANEXO TÉCNICO (NO REABRE CONTRATOS)
ESTADO: PROPUESTO (A LA ESPERA DE CONFIRMACIÓN)

--------------------------------------------------
1. OBJETIVO DEL ANEXO
--------------------------------------------------

Este anexo define el LAYOUT TÉCNICO de la UI de selección
de habilidades (Skills / Spells), traduciendo los contratos
de UI WRITE (abstractos) a una materialización concreta
en inventarios de Minecraft.

Este documento:
- NO introduce reglas nuevas
- NO modifica contratos existentes
- NO implementa lógica de gameplay
- NO altera Z7 ni Z8
- NO toca PlayerData
- SOLO define estructura visual y navegación

--------------------------------------------------
2. PANTALLAS INVOLUCRADAS
--------------------------------------------------

2.1 RPG MENU (existente)
------------------------
- Menú ya implementado.
- Se añade un acceso:
  - Botón: "HABILIDADES"
  - Acción: abrir SKILL_SELECTION_ROOT

--------------------------------------------------

2.2 SKILL_SELECTION_ROOT
------------------------
Inventario: 54 slots (6 filas)

Pantalla principal de gestión de habilidades.

ZONAS OBLIGATORIAS (según contratos):

Zona A — CONTEXTO (slots 0–8)
- Rama activa
- Subrama activa
- Bastón equipado
- Estado del jugador:
  - Fuera de combate / Bloqueado (visual)
- Información solo READ-ONLY

Zona B — CATÁLOGO (slots 9–35)
- Lista de habilidades base disponibles
- Estados visuales:
  - Equipada
  - No equipada
  - Bloqueada (visual, sin deducción)
- Click:
  - Selecciona habilidad base
  - Abre selector de variante si aplica

Zona C — CONFIGURACIÓN ACTIVA (slots 36–44)
- Slots actuales del loadout:
  - Primary
  - Secondary
  - Ultimate
- Muestra:
  - Habilidad base
  - Variante combinada activa (si existe)
- READ-ONLY (no se aplica nada aquí)

Zona D — CONTROL (slots 45–53)
- CONFIRMAR
  - Deshabilitado si no hay cambios
- CANCELAR
  - Descarta cambios locales
- VOLVER
  - Regresa a RPG MENU

--------------------------------------------------

2.3 SKILL_VARIANT_SELECTION
---------------------------
Inventario: 27 slots (3 filas)

Pantalla de selección de variantes para una habilidad base.

Contenido:
- Variante base
- Variantes combinadas visibles

Reglas:
- Seleccionar variante NO aplica cambios
- La variante hereda el slot de la habilidad base
- Deseleccionar variante vuelve a versión base
- Botón VOLVER:
  - Regresa a SKILL_SELECTION_ROOT

--------------------------------------------------

2.4 SKILL_CONFIRMATION
----------------------
Inventario: 27 slots (3 filas)

Pantalla obligatoria de confirmación explícita.

Contenido:
- Comparativa visual:
  - Estado actual
  - Estado propuesto
- Mensaje:
  - “Ningún cambio se aplicará sin confirmación”

Botones:
- CONFIRMAR
  - Envía AbilityLoadoutChangeRequest al Core
- CANCELAR
  - Descarta cambios y vuelve a ROOT

--------------------------------------------------
3. REGLAS TÉCNICAS GLOBALES
--------------------------------------------------

- Todos los inventarios:
  - InventoryClickEvent cancelado por defecto
  - Solo slots definidos permiten interacción

- Navegación:
  - Los menús no se cierran automáticamente
  - Solo CANCELAR / SALIR cierran o retroceden

- UI:
  - No asume éxito
  - No persiste cambios
  - No modifica estado local tras selección
  - Solo reacciona a respuesta del Core:
    - APPROVED / DENIED

--------------------------------------------------
4. LÍMITES EXPLÍCITOS
--------------------------------------------------

Este anexo NO permite:

- Implementar progresión
- Implementar XP
- Implementar compras o desbloqueos
- Implementar cambios en combate
- Implementar lógica de validación propia
- Modificar PlayerData

--------------------------------------------------
5. NOTA FINAL
--------------------------------------------------

Este layout técnico es una traducción directa de los
contratos UI WRITE existentes.

Cualquier modificación futura:
- Requiere nuevo anexo
- No puede alterar contratos cerrados
- Debe respetar separación UI ↔ Core

FIN DEL DOCUMENTO
